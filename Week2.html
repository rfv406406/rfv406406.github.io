<!DOCTYPE html>
<html>
    <head>
        <meta name="viewpoint" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <title>Javascript Week2</title>
    </head>
    <body>
    <script>
        1.
        // 18 years old,college student,legal age,will vote 選以上字串定義為年齡>17歲。
            function findAndPrint(messages){
            for (let key in messages) {
            // 使用條件判斷式來篩選資料
                if (messages[key].includes("18 years old") 
                || messages[key].includes("college student")
                || messages[key].includes("legal age")
                || messages[key].includes("will vote")) 
                    {
                    console.log(key);
                }
            }
        }
            
            
    findAndPrint({
    "Bob":"My name is Bob. I'm 18 years old.",
    "Mary":"Hello, glad to meet you.",
    "Copper":"I'm a college student. Nice to meet you.",
    "Leslie":"I am of legal age in Taiwan.",
    "Vivian":"I will vote for Donald Trump next week",
    "Jenny":"Good morning."
    }); 
    </script>

    <script>
        2.
            function calculateSumOfBonus(data){
            // 表現加給above average獎金為本薪*0.1，average為本薪*0.05，below average為本薪*0.02
            // 職位加給Engineer獎金為本薪*0.05，Sales獎金為本薪*0.09，CEO無私奉獻本職位無獎金亦不考慮工作表現。
            let bonuses = 0;
            for (let i = 0; i < data.employees.length; i++) {
                let salary = data.employees[i].salary;
                let performance = data.employees[i].performance;
                let role = data.employees[i].role;
                let bonus = 0;

                if (typeof salary === "string") {
                    if (salary.includes("USD")) {
                        salary = parseFloat(salary.replace("USD", "")*30);
                    }
                    else {
                        salary = parseFloat(salary.replace(/,/g, ""));
                    }
                }
                if (performance === "above average") {
                    bonus = salary * 0.1;
                }
                if (performance === "average") {
                    bonus = salary * 0.05;
                }
                if (performance === "below average") {
                    bonus = salary * 0.02;
                }
                if (role === "Engineer") {
                    bonus = bonus + salary * 0.05;
                } 
                else if (role === "Sales") {
                    bonus = bonus + salary * 0.09;
                } 
                else if (role === "CEO") {
                    bonus = bonus * 0;
                }
                bonuses = bonuses + bonus;
            }
            console.log("Total bonuses:", bonuses);
        }
    

calculateSumOfBonus({
"employees":[
{
"name":"John",
"salary":"1000USD",
"performance":"above average",
"role":"Engineer"
},
{
"name":"Bob",
"salary":60000,
"performance":"average",
"role":"CEO"
},
{
"name":"Jenny",
"salary":"50,000",
"performance":"below average",
"role":"Sales"
}
]
}); // call calculateSumOfBonus function 
    
    </script>

    <script>
        3.
        function func(...data){
            let names = []
            data.forEach(function(name){
                let middlename = name.split('');
                names.push(middlename[1]);
            })
            /*console.log(names)*/
                let hashTable = new Map();
                names.forEach((item) => {
                    if (hashTable.has(item)){
                        hashTable.set(item, hashTable.get(item) + 1);
                    }
                    else{
                        hashTable.set(item, 1);
                    }});
                    let nomatch = true;
                    for (let [middleName, count] of hashTable) {
                        if (count === 1) {
                            console.log(wholenames(data, middleName));
                            nomatch = false;
                        }
                    }
                    if (nomatch) {
                        console.log("沒有");
                    }
                    function wholenames(names, middleName) {
                        // 從原始人名陣列中找到對應中間字元的人名
                        for (let i = 0; i < names.length; i++) {
                            let middlename = names[i].split('');
                            if (middlename[1] === middleName) {
                                return names[i];
                            }
                        }
                    }
        }
            
func("彭⼤牆", "王明雅", "吳明"); // print 彭⼤牆
func("郭靜雅", "王立強", "林靜宜", "郭立恆", "林花花"); // print 林花花
func("郭宣雅", "林靜宜", "郭宣恆", "林靜花"); // print 沒有
    </script>

    <script>
        4.
            function getNumber(index) {
                let x = 4;
                let y = -1;
                let result = 0;
                
                let remainder = index % 2; // %取得餘數
                if (remainder === 0) {
                    result = (index / 2) * (x + y);
                } else if (remainder > 0) {
                    result = ((index + 1) / 2) * (x + y) + 1;
                }
                console.log(result);
            }

           

getNumber(1); // print 4
getNumber(5); // print 10
getNumber(10); // print 15
    </script>
    </body>
</html>